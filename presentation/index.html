<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A simple scene</title>
    <style>
    html {
        height: 100%;
        font-family: sans-serif;
    }
    h2 {
        line-height: 20px;
        font-size: 20px;
        font-weight: normal;
    }
    body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        height: 100%;
    }
    iframe , section {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border: 0;
        /*display: none;*/
        z-index: 0;
    }
    .content {
        z-index: 1;
        position: absolute;
        bottom: 0;
        left: 0;
        padding: 5px;
        background: #333;
        color: #fff;
        display: none;
    }
    .transitionable {
        transition: left 0.75s ease-in-out;
    }
    </style>
  </head>
  <body>
    <section>
        <iframe data-src="../lights-camera-objects/a-simple-scene.html" width="100%" height="100%" wmode="transparent"></iframe>
        <div class="content">
            <h2>A simple scene</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../lights-camera-objects/a-less-simple-scene.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>A less simple scene</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../lights-camera-objects/a-lit-scene.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>A lit scene</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../lights-camera-objects/multiple-spheres.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Multiple spheres</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>

    <section>
        <iframe data-src="../animation-basics/circular-motion.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Circular motion</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../animation-basics/moving-camera.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Circular motion applied to camera position</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../animation-basics/more-complicated-paths.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Circular motion with increased x period</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../animation-basics/moving-camera-2.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Helix path applied to camera</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../animation-basics/moving-camera-moving-objects.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Helix path applied to camera and object position</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>

    <section>
        <iframe data-src="../objects/planes.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Panes</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/vertices.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Vertices</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/faces.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Faces</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/boxes.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Boxes</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/circles.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Circles</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/spheres.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Spheres</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/rings.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Rings</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/tori.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Tori</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/torusknots.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Torus knots</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/cylinders.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Cylinders</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/cones.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Cones</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/pyramids.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Pyramids</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/tetrahedrons.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Tetrahedrons</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/icosahedrons.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Icosahedrons</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../objects/octahedrons.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Octahedrons</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>

    <section>
        <iframe data-src="../materials/sphere-lambert-basic-phong.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Material types</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../materials/sphere-shading.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Shading types</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../materials/sphere.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Phong shaded sphere</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../materials/sphere-texturemap.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Texture maps</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../materials/sphere-bumpmap.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Bump maps</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../materials/sphere-specularmap.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Specular maps</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../materials/sphere-alphamap.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Alpha maps</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../materials/sphere-transparency.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Transparency</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../materials/sphere-materialsides.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Material sides</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../materials/sphere-customshader.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Custom shaders</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>

    <section>
        <iframe data-src="../importing-objects/importing-objects.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Importing objects</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../importing-objects/importing-objects-textured.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Importing textured objects</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>

    <section>
        <iframe data-src="../improved-sandbox/improved-boilerplate.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Improved sandbox</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>
    <section>
        <iframe data-src="../improved-sandbox/imported-objects.html" width="100%" height="100%"></iframe>
        <div class="content">
            <h2>Improves sandbox</h2>
            <p>
                Lorem ipsum dolor sit amet
            </p>
        </div>
    </section>

    <script>
        var slideNum = 0;
        if(window.location.hash){
            slideNum = parseInt(window.location.hash.replace('#',''), 10);
        }

        function windowSize(){
            return {
                width: Math.max(document.documentElement.clientWidth, window.innerWidth || 0),
                height: Math.max(document.documentElement.clientHeight, window.innerHeight || 0)
            };
        }

        function getSection(index){
            return document.querySelectorAll('section')[index];
        }

        function loadSlide(index){
            var slide = getSection(index);
            var frame = slide.querySelector('iframe');
            var content = slide.querySelector('.content');
            var wSize = windowSize();

            if(frame){
                frame.width = wSize.width + 'px';
                frame.height = wSize.height + 'px';
                frame.src = frame.dataset.src;
            }
            if(content){
                content.style.display = 'block';
            }
        }

        function updateHash(){
            window.location.hash = '#' + slideNum;
        }

        function unloadSlideOnTransition(slide){
            function removeLastFrame(){
                var prevFrame = slide.querySelector('iframe');
                if(prevFrame){
                    prevFrame.src = '';
                }
                document.body.removeEventListener('transitionend', removeLastFrame);
            }
            document.body.addEventListener('transitionend', removeLastFrame);
        }

        function next(){
            var currentSlide = getSection(slideNum);
            var nextSlide = getSection(slideNum+1);
            var wSize = windowSize();

            currentSlide.style.left = -wSize.width + 'px';
            nextSlide.style.left = '0px';

            loadSlide(slideNum+1);
            unloadSlideOnTransition(currentSlide);

            slideNum++;
            updateHash();
        }

        function prev(){
            var currentSlide = getSection(slideNum);
            var nextSlide = getSection(slideNum-1);
            var wSize = windowSize();

            currentSlide.style.left = '0px';
            nextSlide.style.left = -wSize.width + 'px';
            nextSlide.classList.remove('transitionable');

            requestAnimationFrame(function(){
                nextSlide.classList.add('transitionable');

                currentSlide.style.left = wSize.width + 'px';
                nextSlide.style.left = '0px';

                loadSlide(slideNum-1);
                unloadSlideOnTransition(currentSlide);

                slideNum--;
                updateHash();
            });
        }

        document.addEventListener('keydown', function(e){
            if(e.which === 39){
                return next();
            }
            if(e.which === 37){
                return prev();
            }
        });

        function init(){
            var windowWidth = windowSize().width;
            Array.apply(null, document.querySelectorAll('section')).forEach(function(section){
                section.style.left = windowWidth + 'px';
                section.classList.add('transitionable');
            });
            var firstSection = getSection(slideNum);
            firstSection.style.left = '0px';
            loadSlide(slideNum);
        }

        init();
    </script>
  </body>
</html>
